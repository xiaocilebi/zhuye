<!DOCTYPE html>
<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta name="color-scheme" content="light dark">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui">
    <title>主页</title>
    <link rel="stylesheet" href="homepage.css">
    <style></style>
</head>
<body>
    <div class='frosted-glass' id='gesture-indicator'></div>
    <div id="content">
        <div class="search_part">
            <a class="logo" href="" onclick="window.via.cmd(257);" title="书签">
                <img style="-webkit-user-select: none" src="logo.gif" style="display:block;" width="60%">
            </a>
            <form onsubmit="return search()" class="search_bar" title="搜索">
                <button onclick="search()" id="search_submit" value="" aria-label="搜索">
                    <div class="search icon"></div>
                </button>
                <span>
                    <input class="search" onfocus="showButton()" onblur="hideButton()" type="text" value="" autocomplete="off" id="search_input" title="搜索">
                </span>
            </form>
        </div>
        <script type="text/javascript">
            function showButton(){
                document.getElementById("search_submit").style.display="block";
            }
            
            function hideButton(){
                if(document.getElementById("search_input").value==""){
                    document.getElementById("search_submit").style.display="none";
                }
            }
            
            function search(){
                var input = document.getElementById("search_input");
                if(input.value != ""){
                    window.location.href = "https://www.google.com/search?q=" + encodeURIComponent(input.value);
                    input.value = ""; // Optionally clear the input after search
                    document.getElementById("search_submit").style.display="none";
                    document.activeElement.blur();
                }
                return false; // Prevent form submission
            }
            
            function fadeIn(a){
                if(a && a.style) var b = Math.max(.05, parseFloat(a.style.opacity)), d = setInterval(function(){
                    if(1 <= b) clearInterval(d);
                    a.style.opacity = Math.min(1, b);
                    b += .1 * b;
                }, 6);
            }
            
            function isGestureDisabled(){
                return document.activeElement && "search_input" == document.activeElement.id || window.via && !window.via.cmd(515) ? true : 0 != (document.documentElement.scrollTop || document.body.scrollTop);
            };
            
            function initGesture(f){
                var c = document.getElementById("content"), d = false, h = 0, b = 0, g = 0, a = 0;
                f.addEventListener("touchstart", function(e){
                    d = isGestureDisabled();
                    if(!d){
                        h = e.touches[0].screenY;
                        a = b = 0;
                        document.body.style.overflow = "visible";
                    }
                }, false);
                f.addEventListener("touchmove", function(e){
                    if(!d){
                        g = b;
                        b = e.touches[0].screenY - h;
                        a = Math.min(98, Math.max(0, a + b - g));
                        c.style.transform = "translateY(" + a + "px)";
                        c.style.opacity = Math.max(.1, 1 - a / 98);
                        if(1 < g != 1 < b){
                            document.body.style.overflow = 1 < b ? "hidden" : "visible";
                        }
                    }
                }, false);
                f.addEventListener("touchend", function(e){
                    if(!d){
                        if(0 !== a){
                            if(88.2 < a) try{
                                window.via.cmd(514);
                            }catch(k){}
                            c.style.transform = "translateY(0px)";
                            fadeIn(c);
                        }
                        document.body.style.overflow = "visible";
                    }
                }, false);
            };
            
            initGesture(document.getElementById("gesture-indicator"));
            initGesture(document.getElementById("content"));
        </script>
        <script src="opensug2.js"></script>
        <script type="text/javascript">
            function show(str){
                var searchbox = document.getElementById("search_input");
                searchbox.value = str;
                searchbox.blur();
                search();
            }
            var params = {"radius":'0px' };
            OpenSuggestion.bind("search_input", params, show);
        </script>
    </div>
</body>
</html>